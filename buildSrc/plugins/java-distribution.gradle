import org.gradle.api.tasks.bundling.Zip


apply plugin: "java"

task('dist', type: Zip) {
    group = 'Distribution'
    description = "Makes the project specific distribution archive."
    dependsOn 'jar'
    from jar
    from configurations.runtime
    exclude 'log4j-1.2.16-1.0-BETA.jar', 'jcommon-1.0.15-1.0-BETA.jar', 'jfreechart-1.0.12-1.0-BETA.jar',  'junit-4.10-1.0-BETA.jar', 'commons-collections-3.2.1-1.0-BETA.jar', 'slf4j-api-1.6.1-1.0-BETA.jar', 'slf4j-log4j12-1.6.1-1.0-BETA.jar'
}

task('testCodeDist', type: Zip) {
    group = 'Distribution'
    description = "Makes the project specific test code distribution archive."
    dependsOn 'jar'
    from testSourcesJar
    from configurations.testRuntime
    exclude 'log4j-1.2.16-1.0-BETA.jar', 'jcommon-1.0.15-1.0-BETA.jar', 'jfreechart-1.0.12-1.0-BETA.jar',  'junit-4.10-1.0-BETA.jar', 'commons-collections-3.2.1-1.0-BETA.jar', 'slf4j-api-1.6.1-1.0-BETA.jar', 'slf4j-log4j12-1.6.1-1.0-BETA.jar'
}

artifacts {
    archives dist
    archives sourcesJar
}

task release(dependsOn: [dist, sourcesJar]) {
    group = 'Distribution'
    description = "Defines the project specific release distributions."
}

task testCodeRelease(dependsOn: [testCodeDist, testSourcesJar]) {
    group = 'Distribution'
    description = "Defines the project specific test code release distributions."
}

