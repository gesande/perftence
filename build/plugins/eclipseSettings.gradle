import org.gradle.api.tasks.GradleBuild
import org.gradle.logging.StyledTextOutputFactory
import org.gradle.logging.StyledTextOutput.Style


apply plugin: "eclipse"

task eclipseSettings(type: GradleBuild) { GradleBuild task ->
    task.group = 'IDE'
    task.description= 'Build fresh Eclipse settings for all projects.'
    task.tasks << 'eclipseSettingsFor'
    task.doLast { printOutInfo( "eclipseSettings.eclipseSettings", "Eclipse settings ready for all projects. Now import the projects (without copying them) into Eclipse.") }
}

subprojects {
    task eclipseSettingsFor(type: GradleBuild) { GradleBuild task->
        group = 'IDE'
        description = 'Build fresh Eclipse settings for a specific module.'
        tasks << 'cleanEclipse'
        tasks << 'eclipse'
        doLast { printOutInfo "eclipseSettings.eclipseSettingsFor", "Eclipse settings ready for ${task.project.name}. Now import the project (without copying it) into Eclipse." }
    }
}

void printOutInfo(String taskName, String msg){
    services.get(StyledTextOutputFactory).create(taskName).withStyle(Style.Info).println(msg)
}




