import org.gradle.logging.StyledTextOutput;
import org.gradle.logging.StyledTextOutputFactory;
import static org.gradle.logging.StyledTextOutput.Style;

task archiveAggregateReports(type: Tar) {
    from ("$reportDir/emma") { into ('emma') }
    from ("$reportDir/findbugs") { into ('findbugs') }
    from ("$reportDir/jdepend") { into 'jdepend' }
    from ("$reportDir/junit") { into 'junit' }
    // Set destination directory.
    destinationDir = file("$reportDir")
    // Set filename properties.
    baseName = "report-artifacts"
    extension = 'tar.gz'
    compression = Compression.GZIP

    doLast {
        def outputFactory = services.get(StyledTextOutputFactory).create("archiveAggregateReports")
        outputFactory.withStyle(Style.Info).println("Report artifact archive can be found from file://$reportDir/report-artifacts.tar.gz")
    }
}
