import org.gradle.logging.StyledTextOutputFactory
import org.gradle.logging.StyledTextOutput.Style


apply from: "$buildPlugins/findbugs.gradle"
apply from: "$buildPlugins/jdepend.gradle"
apply from: "$buildPlugins/pmd.gradle"

task testCodeAnalysis(dependsOn: [
    findbugsTest,
    pmdTest,
    jdependTest
]) {
    group = 'Verification'
    description = 'Analyze test code with pmd/findbugs/jdepend'
    doLast {
        def outputFactory = services.get(StyledTextOutputFactory).create("codeAnalysis.testCodeAnalysis")
        outputFactory.withStyle(Style.Info).println("Test code analyzed for $project ")
    }
}

task mainCodeAnalysis(dependsOn: [
    findbugsMain,
    pmdMain,
    jdependMain
]) {
    group = 'Verification'
    description = 'Analyze main code with pmd/findbugs/jdepend'
    doLast {
        def outputFactory = services.get(StyledTextOutputFactory).create("codeAnalysis.mainCodeAnalysis")
        outputFactory.withStyle(Style.Info).println("Main code analyzed for $project ")
    }
}
